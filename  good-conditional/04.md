[좋은 조건문 작성하기 3] 복잡한 조건문을 더 복잡하게 만들지 않기

### 0. 분기의 기준

복잡한 조건문을 작성하다보면, 무언가 잘못 분기하고 있다고 느낄 때가 있다.  
이 부분은 애매하지만 매우 중요한 부분이라 생각되어 어떻게는 글로 풀어써보려고 한다.

일단, 코드를 보자.

과일의 이름에 따라 적용가능한 색깔들(배열)을 가져오는 함수다.

```js
function availableColorsByFruit1(fruitName) {
    if (fruitName === 'banana') return ['yellow', 'green'];
    if (fruitName === 'apple') return ['red', 'green'];
    if (fruitName === 'grape') return ['red', 'green', 'purple']
    if (fruitName === 'tomato') return ['red', 'green', 'yellow'];
    return ['green'];
}

function availableColorsByFruit2(fruitName) {
    const colors = [];
    if (fruitName === 'apple' || fruitName === 'tomato' || fruitName === 'grape') {
        colors.push('red');
    }
    if (fruitName === 'banana' || fruitName === 'tomato') {
        colors.push('yellow');
    }
    if (fruitName === 'grape') {
        colors.push('red');
    }
    colors.push('green');
    return colors;
}
```

개발자들은 둘 중 어떤게 더 가독성이 좋다고 느낄까?  
지극히 주관적인 의견으론 1번이 좋다고 느낀다.

그 이유를 적어보자면,

1. 코드줄(Line) 수부터가 차이가 난다.
2. 'or' 조건이 많아 조건식이 복잡하다.
3. 'else' 없는 분기문이 많아 흐름 파악 어렵다.

지극히 주관적이지만 공감하는 사람들을 꽤 있을 것으로 보인다.

하지만 다음 코드를 보면 생각이 달라질 지 모른다.

```js
function availableColorsByFruit1(fruitName) {
    if (fruitName === 'banana') return ['yellow', 'green'];
    if (fruitName === 'apple') return ['red', 'green'];
    if (fruitName === 'grape') return ['red', 'green', 'purple']
    if (fruitName === 'tomato') return ['red', 'green', 'yellow'];
    if (fruitName === 'watermelon') return ['black', 'green', 'red'];
    if (fruitName === 'melon') return ['green'];
    if (fruitName === 'orange') return ['orange'];
    if (fruitName === 'blueberry') return ['blue', 'black'];
    if (fruitName === 'mandarin') return ['orange'];
    if (fruitName === 'pear') return ['yellow'];
    if (fruitName === 'kiwi') return ['green'];
    if (fruitName === 'lemon') return ['yellow'];
    return ['green'];
}

function availableColorsByFruit2(fruitName) {
    const colors = [];
    if (fruitName === 'apple' || fruitName === 'tomato' || fruitName === 'grape') {
        colors.push('red');
    }
    if (fruitName === 'banana' || fruitName === 'tomato') {
        colors.push('yellow');
    }
    if (fruitName === 'grape' || fruitName === 'watermelon') {
        colors.push('red');
    }
    if (fruitName === 'grape' || fruitName === 'watermelon') {
        colors.push('black');
    }
    if (fruitName === 'grape' || fruitName === 'watermelon') {
        colors.push('blue');
    }
    if (fruitName === 'grape' || fruitName === 'watermelon') {
        colors.push('orange');
    }
    colors.push('green');
    return colors;
}
```

근데 이게 함수라면???
includes도 써야겠지
그냥 부분부분을 함수로 만들자.


```js
function makeColorsByFruit(fruitName) {
    if (fruitName === 'banana') {
        yellow();
        green();
    } else if (fruitName === 'apple') {
        red();
        green();
    } else if (fruitName === 'grape') {
        purple();
        green();
        red();
    } else if (fruitName === 'tomato') {
        red();
        green();
        yellow();
    } else {
        green();
    }
}

function makeColorsByFruit(fruitName) {
    if (fruitName === 'apple' || fruitName === 'tomato' || fruitName === 'grape') {
        red();
    }

    if (fruitName === 'banana' || fruitName === 'tomato') {
        yellow();
    }

    if (fruitName === 'grape') {
        purple();
    }

    green();
}
```



그나마 과일이름이 바나나일때 라는 조건은 간단하지만 예를들어, 관리자 권한과 글작성 권한이면서 업무템플릿에서 작성할때?와 같은 조건이 복잡한 경우에는 조건을 확인하기도 어려운데 